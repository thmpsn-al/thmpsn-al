w<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kieliharjoituspeli</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .hint-list {
            margin-top: 20px;
        }

        .hint-item {
            margin-bottom: 10px;
        }

        #feedback {
            font-weight: bold;
            margin-top: 10px;
        }

        .quiz-option {
            margin-top: 10px;
            display: block;
        }

        .correct {
            color: green;
        }

        .incorrect {
            color: red;
        }
    </style>
</head>
<body>

<div class="container mt-5">
    <h1 class="text-center">Kieliharjoituspeli</h1>

    <div id="game-area" class="mt-5">
        <!-- This is where game content (questions) will appear -->
    </div>

    <div id="feedback"></div>

    <button id="next-question" class="btn btn-primary mt-3" style="display: none;">Seuraava kysymys</button>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
    $(function() {
        const words = [
            { word: "en platta", forms: ["en platta", "plattan", "plattor", "plattorna"] },
            { word: "en skärm", forms: ["en skärm", "skärmen", "skärmar", "skärmarna"] },
            { word: "en tidning", forms: ["en tidning", "tidningen", "tidningar", "tidningarna"] },
            { word: "en bild", forms: ["en bild", "bilden", "bilder", "bilderna"] },
            { word: "ett videoklipp", forms: ["ett videoklipp", "videoklippet", "videoklipp", "videoklippen"] },
            { word: "en rubrik", forms: ["en rubrik", "rubriken", "rubriker", "rubrikerna"] },
            { word: "en bror", forms: ["en bror", "brodern", "bröder", "bröderna"] },
            { word: "ett nät", forms: ["ett nät", "nätet", "nät", "näten"] }
        ];

        const quizQuestions = [
            // Kysymykset suomi -> ruotsi
            { question: "Mikä on ruotsiksi 'veli'?", options: ["en syster", "en bror", "en far"], correct: "en bror" },
            { question: "Mikä on ruotsiksi 'sanomalehti'?", options: ["en bok", "en tidning", "en dator"], correct: "en tidning" },
            { question: "Mikä on ruotsiksi 'tabletti'?", options: ["en dator", "en platta", "en skärm"], correct: "en platta" },
            { question: "Mikä on ruotsiksi 'näyttö'?", options: ["en skärm", "en rubrik", "en tidning"], correct: "en skärm" },
            { question: "Mikä on ruotsiksi 'kuva'?", options: ["en tidning", "en bild", "ett nät"], correct: "en bild" },
            { question: "Mikä on ruotsiksi 'videoklippi'?", options: ["ett videoklipp", "en skärm", "ett nät"], correct: "ett videoklipp" },
            { question: "Mikä on ruotsiksi 'otsikko'?", options: ["en bild", "en rubrik", "en bror"], correct: "en rubrik" },
            { question: "Mikä on ruotsiksi 'netti'?", options: ["ett nät", "ett videoklipp", "en skärm"], correct: "ett nät" },
            { question: "Mikä on ruotsiksi 'tietokoneella'?", options: ["vid datorn", "på datorn", "under datorn"], correct: "vid datorn" },
            { question: "Mikä tarkoittaa 'eilen illalla'?", options: ["i går kväll", "efter nyheterna", "snabbare och roligare"], correct: "i går kväll" },
            { question: "Mikä tarkoittaa 'vuorokauden ympäri'?", options: ["dygnet runt", "hela världen", "efter nyheterna"], correct: "dygnet runt" },
            { question: "Mikä tarkoittaa 'parempi kuin'?", options: ["bättre än", "snyggast", "billigast"], correct: "bättre än" },
            { question: "Mikä tarkoittaa 'komein'?", options: ["snyggast", "bättre än", "billigast"], correct: "snyggast" },
            { question: "Mikä tarkoittaa 'halvin'?", options: ["billigast", "snyggast", "bättre än"], correct: "billigast" },
            { question: "Mikä tarkoittaa 'yhdessä'?", options: ["tillsammans", "hela världen", "vid datorn"], correct: "tillsammans" },
            { question: "Mikä tarkoittaa 'koko maailma'?", options: ["hela världen", "hela familjen", "tillsammans"], correct: "hela världen" },

            // Kysymykset ruotsi -> suomi
            { question: "Mikä on suomeksi 'en tidning'?", options: ["sanomalehti", "verho", "tietokone"], correct: "sanomalehti" },
            { question: "Mikä on suomeksi 'en skärm'?", options: ["näyttö", "tabletti", "tietokone"], correct: "näyttö" },
            { question: "Mikä on suomeksi 'en platta'?", options: ["tabletti", "tietokone", "näyttö"], correct: "tabletti" },
            { question: "Mikä on suomeksi 'en bror'?", options: ["veli", "sisko", "isä"], correct: "veli" },
            { question: "Mikä on suomeksi 'ett nät'?", options: ["netti", "kuva", "sanomalehti"], correct: "netti" },
            { question: "Mikä on suomeksi 'ett videoklipp'?", options: ["videoklippi", "kuva", "netti"], correct: "videoklippi" },
            { question: "Mikä tarkoittaa 'i går kväll'?", options: ["eilen illalla", "huomenna", "yöllä"], correct: "eilen illalla" },
            { question: "Mikä on suomeksi 'dygnet runt'?", options: ["vuorokauden ympäri", "koko päivän", "yöllä"], correct: "vuorokauden ympäri" },
            { question: "Mitä tarkoittaa 'efter nyheterna'?", options: ["uutisten jälkeen", "uutisten aikana", "ennen uutisia"], correct: "uutisten jälkeen" },
            { question: "Mitä tarkoittaa 'snabbare och roligare'?", options: ["nopeampi ja hauskempi", "komein", "halvin"], correct: "nopeampi ja hauskempi" }
        ];

        let usedWords = [];
        let usedQuizzes = [];
        let currentWordData = null;
        let currentMissingFormIndex = null;
        let currentQuestionType = null; // Either 'form' or 'quiz'

        function shuffle(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        function getNextQuestion() {
            $("#feedback").hide();
            $("#next-question").hide();
            $("#game-area").empty();

            // Satunnaisesti valitaan tekstikysymys (muotojen kysyminen) tai monivalintakysymys
            if (Math.random() > 0.5 && usedWords.length < words.length) {
                currentQuestionType = 'form';
                let wordData = words.find(word => !usedWords.includes(word.word));
                usedWords.push(wordData.word);

                currentWordData = wordData;
                currentMissingFormIndex = Math.floor(Math.random() * wordData.forms.length);
                displayWordFormQuestion(wordData, currentMissingFormIndex);
            } else if (usedQuizzes.length < quizQuestions.length) {
                currentQuestionType = 'quiz';
                let quizData = quizQuestions.find(quiz => !usedQuizzes.includes(quiz.question));
                usedQuizzes.push(quizData.question);
                displayQuiz(quizData);
            }

            // Kysymysten resetointi, kun kaikki kysymykset on käyty läpi
            if (usedWords.length === words.length && usedQuizzes.length === quizQuestions.length) {
                usedWords = [];
                usedQuizzes = [];
            }
        }

        // Näytetään sana ja muut taivutusmuodot, paitsi yksi
        function displayWordFormQuestion(wordData, missingFormIndex) {
            const hints = wordData.forms.map((form, index) => {
                if (index === missingFormIndex) {
                    return `<strong>_______</strong> `;
                }
                return `<span class="hint-item">${form}</span>`;
            }).join(', ');

            $("#game-area").html(`
                <h3>Anna oikea muoto sanasta: ${wordData.word}</h3>
                <div class="hint-list">${hints}</div>
                <input type="text" id="user-answer" class="form-control mt-3" placeholder="Kirjoita puuttuva muoto">
                <button id="check-answer" class="btn btn-primary mt-3">Tarkista</button>
            `);

            $("#check-answer").click(function() {
                checkAnswer();
            });
        }

        // Tarkistetaan käyttäjän antama vastaus
        function checkAnswer() {
            const userAnswer = $("#user-answer").val().trim();
            const correctAnswer = currentWordData.forms[currentMissingFormIndex];

            if (userAnswer === correctAnswer) {
                $("#feedback").text("Oikein!").removeClass("incorrect").addClass("correct").show();
            } else {
                $("#feedback").text(`Väärin! Oikea vastaus on: ${correctAnswer}`).removeClass("correct").addClass("incorrect").show();
            }

            $("#next-question").show();
        }

        // Näytetään monivalintakysymys
        function displayQuiz(quizData) {
            $("#game-area").html(`
                <h3>${quizData.question}</h3>
                <div id="quiz-options" class="mt-3"></div>
            `);

            quizData.options.forEach(option => {
                $("#quiz-options").append(`
                    <button class="btn btn-outline-primary quiz-option" data-correct="${option === quizData.correct}">${option}</button>
                `);
            });

            $(".quiz-option").click(function() {
                const isCorrect = $(this).data("correct") === true;
                if (isCorrect) {
                    $("#feedback").text("Oikein!").removeClass("incorrect").addClass("correct").show();
                } else {
                    $("#feedback").text("Väärin!").removeClass("correct").addClass("incorrect").show();
                }

                $("#next-question").show();
            });
        }

        getNextQuestion();

        $("#next-question").click(getNextQuestion);
    });
</script>

</body>
</html>
